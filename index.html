<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Music</title>
    <style>
:root {
    --primary-color: #fa2d48;
    --secondary-color: #1c1c1e;
    --text-color: #ffffff;
    --background-color: #000000;
    --glass-background: rgba(255, 255, 255, 0.1);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    font-size: 16px;
}

header {
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 1rem;
    position: sticky;
    top: 0;
    z-index: 1000;
}

nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
}

main h2 {
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-size: 1.5rem;
}

.logo {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-color);
    text-decoration: none;
}

.search-container {
    display: flex;
    flex-grow: 1;
    margin: 0 2rem;
}

#search-input {
    width: 100%;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 8px;
    background-color: var(--glass-background);
    color: var(--text-color);
}

#search-input::placeholder {
    color: #aaa;
}

#search-button {
    display: none;
}

.nav-links {
    list-style: none;
    display: flex;
}

.nav-links li {
    margin-left: 1rem;
}

.nav-links a {
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
}

main {
    padding: 1rem;
    max-width: 1200px;
    margin: 0 auto;
}

footer {
    background-color: var(--secondary-color);
    padding: 1rem;
    position: fixed;
    bottom: 0;
    width: 100%;
}

.player-container {
    max-width: 1200px;
    margin: 0 auto;
}

#audio-player {
    width: 100%;
}

.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1.5rem;
}

.chart-item {
    background: var(--glass-background);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    overflow: hidden;
    text-decoration: none;
    color: var(--text-color);
    transition: transform 0.2s;
}

.chart-item:hover {
    transform: scale(1.05);
}

.chart-item img {
    width: 100%;
    height: 220px;
    object-fit: cover;
}

.chart-item h3 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0.5rem 1rem;
}

.chart-item p {
    font-size: 0.9rem;
    color: #aaa;
    margin: 0 1rem 1rem 1rem;
}

.song-details-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: calc(100vh - 150px); /* Full height minus header and footer */
    padding: 2rem;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
}

.song-details {
    text-align: center;
}

.song-details img {
    width: 300px;
    height: 300px;
    border-radius: 12px;
    margin-bottom: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.song-details h1 {
    font-size: 2rem;
    font-weight: 700;
}

.song-details h2 {
    font-size: 1.2rem;
    font-weight: 400;
    color: #aaa;
}

.album-details-container {
    padding: 2rem;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
}

.album-header {
    display: flex;
    align-items: center;
    margin-bottom: 2rem;
}

.album-header img {
    width: 200px;
    height: 200px;
    border-radius: 12px;
    margin-right: 2rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.album-info h1 {
    font-size: 2.5rem;
    font-weight: 700;
}

.album-info h2 {
    font-size: 1.5rem;
    font-weight: 500;
    color: var(--primary-color);
}

.album-info p {
    font-size: 1rem;
    color: #aaa;
    margin-top: 0.5rem;
}

.artist-details-container {
    padding: 2rem;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(50px);
    -webkit-backdrop-filter: blur(50px);
}

.artist-header {
    text-align: center;
    margin-bottom: 2rem;
}

.artist-header img {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    margin-bottom: 1rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.artist-header h1 {
    font-size: 3rem;
    font-weight: 700;
}

.artist-section h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
}

.track-item .track-thumbnail {
    width: 40px;
    height: 40px;
    border-radius: 4px;
    margin-right: 1rem;
}

.track-list {
    width: 100%;
    margin-top: 1rem;
}

.track-item {
    display: grid;
    grid-template-columns: 40px 1fr auto;
    align-items: center;
    padding: 0.8rem 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--text-color);
    text-decoration: none;
    transition: background-color 0.2s;
}

.track-item:hover {
    background-color: var(--glass-background);
}

.track-number {
    color: #aaa;
}

.track-title {
    font-weight: 500;
}

.track-duration {
    color: #aaa;
}

.player-container {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    align-items: center;
}

.song-info-footer {
    display: flex;
    align-items: center;
}

#footer-thumb {
    width: 50px;
    height: 50px;
    border-radius: 4px;
    margin-right: 1rem;
}

#footer-title {
    font-weight: 500;
}

#footer-artist {
    color: #aaa;
    font-size: 0.8rem;
}

.player-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.player-buttons {
    display: flex;
    align-items: center;
}

.player-controls button {
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.5rem;
    cursor: pointer;
    margin: 0 1rem;
}

#progress-bar {
    width: 100%;
    margin-top: 0.5rem;
}

.volume-container {
    display: flex;
    justify-content: flex-end;
    align-items: center;
}

#volume-slider {
    width: 100px;
}

.search-results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
}

.search-result-item {
    background-color: var(--secondary-color);
    padding: 1rem;
    border-radius: 5px;
    text-align: center;
}

.search-result-item img {
    width: 100%;
    border-radius: 5px;
}

.search-result-item h3 {
    margin-top: 0.5rem;
    font-size: 1rem;
}

.search-result-item p {
    font-size: 0.8rem;
    color: #aaa;
}

/* Responsive Design */
@media (max-width: 768px) {
    nav {
        flex-direction: column;
    }

    .search-container {
        margin: 1rem 0;
    }

    .nav-links {
        margin-top: 1rem;
    }
}
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="#home" class="logo">YT Music</a>
            <div class="search-container">
                <input type="search" id="search-input" placeholder="Search...">
                <button id="search-button">Search</button>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#charts">Charts</a></li>
            </ul>
        </nav>
    </header>

    <main id="main-content">
        <!-- Content will be loaded here dynamically -->
    </main>

    <footer>
        <div class="player-container">
            <div class="song-info-footer">
                <img id="footer-thumb" src="">
                <div class="footer-song-details">
                    <p id="footer-title"></p>
                    <p id="footer-artist"></p>
                </div>
            </div>
            <audio id="audio-player"></audio>
            <div class="player-controls">
                <div class="player-buttons">
                    <button id="prev-button">⏮</button>
                    <button id="play-pause-button">▶️</button>
                    <button id="next-button">⏭</button>
                </div>
                <input type="range" id="progress-bar" value="0">
            </div>
            <div class="volume-container">
                <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="1">
            </div>
        </div>
    </footer>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    console.log('YouTube Music App Initialized');

    const mainContent = document.getElementById('main-content');
    const API_BASE_URL = 'https://swipeapis.vercel.app';

    async function fetchCharts() {
        try {
            const response = await fetch(`${API_BASE_URL}/youtubemusic/charts`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data.results;
        } catch (error) {
            console.error('Error fetching charts:', error);
            return null;
        }
    }

    function renderCharts(tracks) {
        if (!tracks) {
            mainContent.innerHTML = '<h1>Error loading charts</h1>';
            return;
        }

        let html = '<h1>Listen Now</h1>';

        if(tracks.length > 0) {
            html += '<div class="charts-grid">';
            tracks.forEach(item => {
                html += `
                    <a href="#song/${item.videoId}" class="chart-item">
                        <img src="${item.thumbnails.pop().url}" alt="${item.title}">
                        <h3>${item.title}</h3>
                        <p>${item.artists.map(a => a.name).join(', ')}</p>
                    </a>
                `;
            });
            html += '</div>';
        }

        mainContent.innerHTML = html;
    }

    function navigate() {
        const hash = window.location.hash || '#home';
        loadContent(hash);
    }

    async function loadContent(hash) {
        if (hash === '#home' || hash === '#charts') {
            mainContent.innerHTML = '<h1>Loading Charts...</h1>';
            const charts = await fetchCharts();
            renderCharts(charts);
        } else {
            mainContent.innerHTML = `<h1>${hash.substring(1)} Page</h1><p>Content for ${hash.substring(1)} page will be loaded here.</p>`;
        }
    }

    async function fetchSearch(query) {
        try {
            const response = await fetch(`${API_BASE_URL}/youtubemusic/search?q=${encodeURIComponent(query)}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data.results;
        } catch (error) {
            console.error('Error fetching search results:', error);
            return null;
        }
    }

    function renderSearchResults(results) {
        if (!results) {
            mainContent.innerHTML = '<h1>Error loading search results</h1>';
            return;
        }

        const songs = results.filter(item => item.resultType === 'song');
        const albums = results.filter(item => item.resultType === 'album');
        const artists = results.filter(item => item.resultType === 'artist');

        let html = '<h1>Search Results</h1>';

        if (songs.length > 0) {
            html += '<h2>Songs</h2><div class="charts-grid">';
            songs.forEach(item => {
                html += `
                    <a href="#song/${item.videoId}" class="chart-item">
                        <img src="${item.thumbnails.pop().url}" alt="${item.title}">
                        <h3>${item.title}</h3>
                        <p>${item.artists.map(a => a.name).join(', ')}</p>
                    </a>
                `;
            });
            html += '</div>';
        }

        if (albums.length > 0) {
            html += '<h2>Albums</h2><div class="charts-grid">';
            albums.forEach(item => {
                html += `
                    <a href="#album/${item.browseId}" class="chart-item">
                        <img src="${item.thumbnails.pop().url}" alt="${item.title}">
                        <h3>${item.title}</h3>
                        <p>${item.artists.map(a => a.name).join(', ')}</p>
                    </a>
                `;
            });
            html += '</div>';
        }

        if (artists.length > 0) {
            html += '<h2>Artists</h2><div class="charts-grid">';
            artists.forEach(item => {
                html += `
                    <a href="#artist/${item.browseId}" class="chart-item">
                        <img src="${item.thumbnails.pop().url}" alt="${item.title}">
                        <h3>${item.title}</h3>
                        <p>Artist</p>
                    </a>
                `;
            });
            html += '</div>';
        }

        mainContent.innerHTML = html;
    }

    const searchButton = document.getElementById('search-button');
    const searchInput = document.getElementById('search-input');

    searchButton.addEventListener('click', async () => {
        const query = searchInput.value;
        if (query) {
            window.location.hash = `#search?q=${encodeURIComponent(query)}`;
        }
    });

    searchInput.addEventListener('keypress', async (e) => {
        if (e.key === 'Enter') {
            const query = searchInput.value;
            if (query) {
                window.location.hash = `#search?q=${encodeURIComponent(query)}`;
            }
        }
    });

    const audioPlayer = document.getElementById('audio-player');
    const playPauseButton = document.getElementById('play-pause-button');
    const progressBar = document.getElementById('progress-bar');
    const volumeSlider = document.getElementById('volume-slider');

    playPauseButton.addEventListener('click', () => {
        if (audioPlayer.paused) {
            audioPlayer.play();
            playPauseButton.textContent = '⏸️';
        } else {
            audioPlayer.pause();
            playPauseButton.textContent = '▶️';
        }
    });

    audioPlayer.addEventListener('timeupdate', () => {
        progressBar.value = (audioPlayer.currentTime / audioPlayer.duration) * 100;
    });

    progressBar.addEventListener('input', () => {
        audioPlayer.currentTime = (progressBar.value / 100) * audioPlayer.duration;
    });

    volumeSlider.addEventListener('input', () => {
        audioPlayer.volume = volumeSlider.value;
    });


    window.addEventListener('hashchange', navigate);
    navigate(); // Load initial content

    async function fetchSong(videoId) {
        try {
            const response = await fetch(`${API_BASE_URL}/youtubemusic/song/${videoId}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data;
        } catch (error) {
            console.error('Error fetching song:', error);
            return null;
        }
    }

    function renderSong(song) {
        if (!song) {
            mainContent.innerHTML = '<h1>Error loading song</h1>';
            return;
        }

        const audioPlayer = document.getElementById('audio-player');
        const audioSource = song.streamingData.formats.find(f => f.mimeType.startsWith('audio'));
        if (audioSource) {
            audioPlayer.src = audioSource.url;
            audioPlayer.play();
            playPauseButton.textContent = '⏸️';
        }

        const backgroundArt = song.videoDetails.thumbnail.thumbnails.pop().url;
        mainContent.style.backgroundImage = `url(${backgroundArt})`;

        document.getElementById('footer-thumb').src = backgroundArt;
        document.getElementById('footer-title').textContent = song.videoDetails.title;
        document.getElementById('footer-artist').textContent = song.videoDetails.author;


        let html = `
            <div class="song-details-container">
                <div class="song-details">
                    <img src="${backgroundArt}" alt="${song.videoDetails.title}">
                    <h1>${song.videoDetails.title}</h1>
                    <h2>${song.videoDetails.author}</h2>
                </div>
            </div>
        `;
        mainContent.innerHTML = html;
    }

    async function fetchAlbum(browseId) {
        try {
            const response = await fetch(`${API_BASE_URL}/youtubemusic/album/${browseId}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data;
        } catch (error) {
            console.error('Error fetching album:', error);
            return null;
        }
    }

    function renderAlbum(album) {
        if (!album) {
            mainContent.innerHTML = '<h1>Error loading album</h1>';
            return;
        }

        const backgroundArt = album.thumbnails.pop().url;
        mainContent.style.backgroundImage = `url(${backgroundArt})`;

        let html = `
            <div class="album-details-container">
                <div class="album-header">
                    <img src="${backgroundArt}" alt="${album.title}">
                    <div class="album-info">
                        <h1>${album.title}</h1>
                        <h2>${album.artists.map(a => a.name).join(', ')}</h2>
                        <p>${album.year} · ${album.trackCount} songs</p>
                    </div>
                </div>
                <div class="track-list">
                    ${album.tracks.map(track => `
                        <a href="#song/${track.videoId}" class="track-item">
                            <p class="track-number">${track.trackNumber}</p>
                            <p class="track-title">${track.title}</p>
                            <p class="track-duration">${track.duration}</p>
                        </a>
                    `).join('')}
                </div>
            </div>
        `;
        mainContent.innerHTML = html;
    }

    async function fetchArtist(artistId) {
        try {
            const response = await fetch(`${API_BASE_URL}/youtubemusic/artist/${artistId}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data;
        } catch (error) {
            console.error('Error fetching artist:', error);
            return null;
        }
    }

    function renderArtist(artist) {
        if (!artist) {
            mainContent.innerHTML = '<h1>Error loading artist</h1>';
            return;
        }

        const backgroundArt = artist.thumbnails.pop().url;
        mainContent.style.backgroundImage = `url(${backgroundArt})`;

        let html = `
            <div class="artist-details-container">
                <div class="artist-header">
                    <img src="${backgroundArt}" alt="${artist.name}">
                    <h1>${artist.name}</h1>
                </div>
                <div class="artist-section">
                    <h2>Top Songs</h2>
                    <div class="track-list">
                        ${artist.songs.results.map(track => `
                            <a href="#song/${track.videoId}" class="track-item">
                                <img src="${track.thumbnails.pop().url}" class="track-thumbnail">
                                <p class="track-title">${track.title}</p>
                                <p class="track-duration">${track.duration}</p>
                            </a>
                        `).join('')}
                    </div>
                </div>
            </div>
        `;
        mainContent.innerHTML = html;
    }

    async function loadContent(hash) {
        const [page, ...rest] = hash.substring(1).split('/');
        const id = rest.join('/');

        if (page === 'home' || page === 'charts' || page === '') {
            mainContent.innerHTML = '<h1>Loading Charts...</h1>';
            const charts = await fetchCharts();
            renderCharts(charts);
        } else if (page === 'search') {
            const queryParams = new URLSearchParams(id);
            const query = queryParams.get('q');
            mainContent.innerHTML = `<h1>Searching for "${decodeURIComponent(query)}"...</h1>`;
            const results = await fetchSearch(decodeURIComponent(query));
            renderSearchResults(results);
        } else if (page === 'song' && id) {
            mainContent.innerHTML = '<h1>Loading song...</h1>';
            const song = await fetchSong(id);
            renderSong(song);
        } else if (page === 'album' && id) {
            mainContent.innerHTML = '<h1>Loading album...</h1>';
            const album = await fetchAlbum(id);
            renderAlbum(album);
        } else if (page === 'artist' && id) {
            mainContent.innerHTML = '<h1>Loading artist...</h1>';
            const artist = await fetchArtist(id);
            renderArtist(artist);
        } else {
            mainContent.innerHTML = `<h1>${page} Page</h1><p>Content for ${page} page will be loaded here.</p>`;
        }
    }
});
    </script>
</body>
</html>
